<title>Safety Demonstration of a Class 1 Smart Device</title>
<author>Sofia Guerra & Eoin Butler</author>
<year>2018</year>
<Jounral>Nuclear Technology</Journal>
<Affiliation>Adelard LLP, 24 Waterside, 44-48 Wharf Road, London N1 7UX, United Kingdom</Affiliation>
<Publishing_house>ANS</Publishing_house>
<Text_Collector>田苗，BFSU</Text_Collector>
<DOI>10.1080/00295450.2017.1419781</DOI>
<URL>https://doi.org/10.1080/00295450.2017.1419781</URL>
Abstract — Horizon Nuclear Power intends to build advanced boiling water reactors at Wylfa  and  Oldbury in the United Kingdom based on the Hitachi-GE (Hitachi) design. In accordance with U.K. policy for new nuclear build, Hitachi, as the reactor designer, is the requesting party to the Generic Design Assessment (GDA), during which the reactor design will be reviewed by the Office for Nuclear Regulation and the Environment Agency. An important step in the GDA process is to demonstrate the viability of the approach developed by Hitachi-GE for the assessment and justification of smart devices. This was done by means of pilot studies of safety class 1 (SC1) and SC2 devices. This paper describes the scope, criteria, process, and approach for the SC1 pilot study and summarizes the results of the study.
Keywords — Smart devices, safety demonstration, source code analysis.
Note — Some figures may be in color only in the electronic version.
I.INTRODUCTION
The nuclear industry is increasingly replacing ana- log instruments with their digital “smart” counterparts. Smart instruments can achieve greater accuracy, attain better noise filtering together with in-built linearization, and provide better online calibration and diagnostics features.
However,  the safety demonstration of a smart device   is often challenging. Smart devices are a specific form of commercial off-the-shelf products,  which  are  normally sold as a black box where there is no knowledge of the internal structure or their development process. Nevertheless, their safety demonstration, particularly  for  the more critical  applications,  might  require  knowledge  of the internal structure and development process. The justification of  sensors  is  made  more  difficult  because the software constitutes a valuable intellectual investment, and the civil nuclear companies purchase sensors in small quantities. In addition, for safety applications, the safety justification may require (static or formal) analysis of the software, which may be difficult to perform in industry- standard source code.
Given the difficulty in obtaining replacement analog sensors and the potential benefits of smart instruments, it is important to establish a realistic and flexible approach for justifying their use in safety systems. Therefore, the Office for Nuclear Regulation (ONR) has required that reactor designers for new nuclear power plants demonstrate that they have a viable approach to justifying smart devices.
Horizon Nuclear Power intends to build advanced boiling water reactors at Wylfa and Oldbury in the United Kingdom based on the Hitachi-GE (Hitachi) design. In accordance with U.K. policy for new nuclear build, Hitachi, as the reactor designer, is the requesting party to the Generic Design Assessment (GDA), during which the reactor design will be reviewed by the ONR and the Environment Agency. Hitachi was supported throughout the GDA process by Horizon Nuclear, which is fully owned by Hitachi and will be the eventual holder of the nuclear site license for the reactors.
As part of the GDA, Hitachi has developed an approach to justifying smart devices and has demonstrated the feasibility of the approach by performing pilot studies at both safety class 1 (SC1) and SC2. This paper describes Hitachi’s approach to justifying smart devices and its application to a temperature transmitter as part of the GDA SC1 pilot study.
II.APPROACH
II.A.United Kingdom Context
The United Kingdom has a specific approach  to  how it assesses and licenses command, control, and protection systems. Despite the internationalization of  the supply chain and effective collaboration with inter- national agencies  (International  Atomic  Energy Agency, Organisation for Economic Co-operation and Development), standards committees [International Electrotechnical Commission (IEC)], working groups (Nuclear Regulators Working Group), and projects to encourage harmonization [such as CEMSIS  (Ref.  1)  and HARMONICS (Ref. 2)], there are still significant differences between the United Kingdom and other countries.
The ONR Safety Assessment Principles3 (SAPs) are the primary principles that define the overall approach to be followed for nuclear installations in the United Kingdom. The SAPs mandate two independent “legs” of the justification for systems dependent on the perfor- mance of computer software:
1.Production excellence (PE) is a demonstration of excellence in all aspects of production from the initial specification through to the finally commissioned system, including
a.thorough application of technical design practice consistent with current accepted standards  for the development of software for  computer- based safety systems
b.implementation of a modern standards quality management system
c.application of a comprehensive testing program formulated to check every system function.
2.Independent confidence-building measures (ICBMs) is an independent and thorough assessment of    a safety system’s fitness for purpose. This is formed of
a.a complete and preferably diverse checking of the finally validated production software by a team that is independent of the systems suppliers
b.an independent assessment of the comprehensive testing program covering the full scope of the test activities.
If weaknesses are identified in PE, compensatory measures are applied to address them.
The justification approach used for a smart instrument needs to be consistent with these clauses to be acceptable for safety-related systems in the U.K. nuclear industry.
II.A.1.Smart Devices
A smart device is a device that contains a microproces- sor, and therefore contains both hardware and software. It is distinguished from a computer by the fact that it is pro- gramed to perform a specialized activity, such as measuring a physical quantity or controlling another device, and cannot be reprogramed by the end user in a way that changes this functionality. However, the end user may be able to perform some limited configuration of the device, such as defining sensor types, input or output ranges, or alarm thresholds. Examples include uninterruptible power supplies, radiation monitors, and gas analyzers.
II.A.2.Classes and SILs
Systems are classified according to the category of the functions they perform in accordance  with  IEC  61226 (Ref. 4). The ONR Technical Assessment Guide 46 (Ref. 5) discusses the reliability claim that might be associated with the safety integrity levels (SILs) of IEC 61508 (Ref. 6). This is of particular interest here, as compliance with IEC 61508 is the preferred approach for the PE leg.
The correspondence in IEC 61508 between SILs and probability of failure on demand (pfd) (for demand usage) or maximum permissible probability of failure per annum (pfa) (for continuous usage) is presented in Table I. Although there is debate on the reliability claims that can be made for each SIL, the relationship between class of system and SIL is usually accepted as that in Table I.
II.B.Hitachi’s Approach
Demonstrating PE requires the manufacturer of the smart device to show that all aspects of design, develop- ment, and production are consistent with good practices and are performed in the context of an adequate quality management system. Additionally, the manufacturer must demonstrate that it has performed a testing program that verifies all functions of the device.
In Hitachi’s approach to PE, shown in Fig. 1, is demonstrated either by means of an Emphasis assessment or by using alternative nuclear design standards, which can be applied if the smart device was developed according to such a standard. The Emphasis approach is the preferred approach in the United Kingdom and was developed by a consortium of U.K. nuclear license holders (independent of
TABLE I
Safety Integrity Levels—Reliability Claims
Fig. 1. Hitachi’s approach.
any standards organization). It has now been accepted by all U.K. nuclear licensees and by ONR, and thus it is an industry consensus.
Emphasis is composed of a questionnaire containing around 400 questions derived from IEC 61508 (Ref. 6), which cover the overall approach to quality management and the design and development processes followed for both hardware and software. The Emphasis questionnaire can be configured for different SILs by including more techniques and measures at higher SILs, as defined in  IEC 61508. The manufacturer is expected to respond to each question with a brief explanation and to provide evidence to support the answers.
When weaknesses are identified during the PE assess- ment, compensatory measures (CMs) are required to address those gaps. The CMs should be specific to the gaps identi- fied. Table II provides an example of how gaps might be
compensated. A possible way of defining the CMs is a claims-argument-evidence (CAE) approach that would sup- port analysis of the impact of the gaps in the overall safety justification, such as the Cogs approach described in Ref. 7. The independent confidence building is an “indepen- dent and thorough assessment of a safety system’s fitness for purpose.”3 The measures should be “commensurate with the level of reliability required and preferably diverse”
from those techniques used during the life cycle.5
The program of measures to be carried out are defined using a CAE approach based on the strategy triangle for safety justification8 (shown in Fig. 2). This strategy is property based, vulnerability aware, and stan- dards informed:
1.Property-based approach: A property-based approach focuses directly on the behavior of the device and explores claims about the satisfaction of the
TABLE II
Example of Gaps and Compensatory Measures
Fig. 2. The strategy triangle of justification.
requirements and the mitigation of potential hazards. A selection of techniques can be made, each of which sup- ports one or more of the properties.
1.Vulnerability assessment: Vulnerabilities are weaknesses in a system. They could lead to a hazar- dous situation (e.g., if a divide by  zero is  not caught  by error handling) but  are  not  strictly  a  hazard.  Some techniques, such  as  static  integrity  analysis, are particularly suited to identifying  vulnerabilities. The techniques used to support the property-based approach and the vulnerability assessment may overlap.
2.Standards compliance: This is satisfied by the PE demonstration.
Hitachi’s approach includes an indication of the ICBMs that may be appropriate for each class. The grading of the ICBM program is reflected not only in the techniques applied (e.g., whether static analysis is applied) but also in what specific activities are per- formed (e.g., which static analysis techniques are applied) and how they  are  applied  (e.g.,  application to the complete code or only the mainline code, or the rigor with which they are applied).
The justification of smart devices follows a lifecycle, which includes the following steps:
1.definition of requirements applicable to the smart device
2.demonstration of PE and  ICBMs
3.additional  hardware qualification
4.demonstration that the smart device is suitable for the application
5.production of justification report.
The first step consists of defining the requirements imposed on the smart device by its intended application. This includes behavioral requirements as well as environ- mental constraints. The objective of the GDA pilot study is to demonstrate to ONR the viability of the PE and ICBM process by applying these methods to an SC1 device. Therefore, the pilot study focused on the second step of the life cycle and would be considered successful if the methods were feasible, i.e., suppliers are prepared to support the assessments and provide the necessary information and the approaches identified can be successfully applied to smart devices.
IV.CASE STUDY
The device selected for the case study was Moore  Industries’ (MII’s) STZ temperature transmitter.  The main functionality of the STZ is to measure the tempera- ture indicated by a sensor (e.g., thermocouple or resis- tance thermometer) and produce a corresponding analog signal. The signal is transmitted via an industry-standard 4- to 20- mA loop that also powers the instrument. The STZ has several advanced features, such as dual/ redundant sensors, sensor diagnostics, and highway
addressable remote transducer (HART) communication. It can be configured using the HART protocol via the 4- to 20- mA output or by a personal computer using a dedicated port as shown in Fig. 3.
For the purposes of the pilot study, a functional envel- ope was defined that encompassed the scope of the device’s functionality that was to be considered in the assessment. For instance, the functionality envelope excluded considera- tion of the HART communications function.
V.PRODUCTION EXCELLENCE
The assessment of PE at class 1 was performed using Emphasis to SIL 3 (i.e., the tool selected the IEC 61508 techniques and measures highly recommended or manda- tory at SIL 3).
The assessment was carried out in stages. After a pre- liminary stage to approve access to commercially sensitive material, MII worked through the Emphasis questionnaire. We visited the manufacturer’s premises for 3 days to review the answers provided. This is useful, as it involves the personnel responsible for the device’s development, allowing any misunderstandings to be quickly cleared up and discus- sions to be held effectively. Following the site visit, we reviewed the answers and evidence, made judgments on the answers to each question, and identified any shortcomings as gaps.
MII prepared for the site visit meticulously; the com- pany had detailed and comprehensive answers to all Emphasis questions and had provided evidence to support the answers given. In addition, we had reviewed all the answers and most of the evidence prior to the site visit. As a result, the assessment and site visit ran effectively
Fig. 3. Schematic of the STZ’s interfaces.
(and faster than expected). This reflected the experience of the supplier with the assessment process and the level of preparation prior to the site visit.
A limited number of gaps between the production process and the Emphasis expectations were identified and are feasible to address. The use of CAE and Cogs provided a strong, principled justification for the com- pensatory measures program.
VI.INDEPENDENT CONFIDENCE-BUILDING MEASURES
The approach to defining the confidence-building program is based on the strategy triangle for safety justi- fication (shown in Fig. 2). The property-based aspect aims to show that the expected behavior of the smart device is met. This part of the triangle seeks to establish the following:
1.ICBM Claim 1: The STZ performs the full range of behaviors required of it.
2.ICBM Claim 2: The STZ is free from unexpected behaviors.
The vulnerability-based assessment addresses vulner- abilities that would affect the ability of the device to exhibit the properties covered in ICBM Claim 1. This  part of the triangle seeks to establish the following:
1.ICBM Claim 3: The smart device is free from typical code defects.
2.ICBM Claim 4: The device performs appropriately in adverse conditions.
For ICBM Claim 1, the most rigorous analyses (e.g., formal proof and simulation-based testing) were applied to the core run-time functionality. Auxiliary functions (e.g., HART and serial port  functions)  are not used in normal operation, and  configuration changes made via these interfaces can  be  checked prior to deployment. Assurance for auxiliary functions is primarily based on testing. Focusing rigorous techniques on core functionality is valid only if we show that auxiliary functions do not interfere with mainline functions in normal operation, so we performed a noninterference analysis.
For ICBM Claims 2, 3, and 4, the selected techniques were applied to the entire code body. This is necessary because software flaws in any part of the code could affect the core run-time functionality. A summary of the techniques performed, their application, tools used, and the claims supported can be seen in Table III. The tools were selected to be diverse from those used by MII  during development.
TABLE III
List of Claims and Supporting  Analyses
In addition, we performed a review of the architec- ture of the device and complexity metrics analysis  (which was used to inform code  review).  As  part  of  the study, we identified other analyses that would be performed to complete the assessment but that were not part of the feasibility activities (e.g., review of the code against the requirements to support Claim 2). For  the pilot study, enough of each of the ICBMs were per- formed to establish their feasibility but were not carried through to their final conclusion.
VI.A.Static Analysis
We used a range of integrity static analysis techniques to build confidence that certain classes of bugs were absent and to show that auxiliary functions (e.g., configuration) could not interfere with the mainline functionality. We used PolySpace Bug Finder to look for departures from coding standards and places where control flow might encounter undefined seman- tics (i.e., what are usually called run-time errors).
Along with the general bug-finding tool, which covers a broad spectrum of problems and potential deviations from design intent, we also used a  number of more specific techniques to address areas where
code problems are likely. We performed a concurrency analysis on interrupts in which we used an Adelard Frama-C plug-in9 to identify shared variables, which  we then analyzed manually to check for deadlock and data corruption problems. We also carried out an ana- lysis to establish whether there were any computation- ally feasible branches of the call graph that  would cause a stack overflow.
VI.B.Formal Proof
The formal code verification focused on functional analysis, involving constructing a mathematical specifi- cation for a function and demonstrating rigorously that the code meets that specification. We used Frama-C,9 with the WP or Jessie plug-ins, which are based on the weakest precondition calculi. We framed predicate claims about functions using Frama-C’s ACSL specification lan- guage. In order to demonstrate the feasibility of the technique, we selected a function from the  mainline  code that was relatively complex. Since the ICBM pro- gram includes integrity static analysis, which also addresses safe use of the C language, we focused our attention on proving all the user-specified behaviors.
VI.C.Simulation-Based Testing
Simulation-based testing was done using the Liverpool Data  Research  Associates  (LDRA) Testbed,10 a tool that enables simulation-based unit testing, integration  testing,  code  coverage  analysis,  etc. This testing focused on the accuracy of the scaling and trimming calculations. In each case,  we  attempted  to demonstrate that
1.the logic of the code is correct
2.there are no calculation errors in the code as tested
3.validation and defensive programming  have been implemented as needed
4.the code satisfies the higher-level system and software requirements.
We used both unit testing and integration testing techniques in simulation testing. Unit testing examines individual functions in isolation, while integration testing examines several functions together to show how the code flow from one function to another pro- vides the required higher-level functionality. It aimed  at achieving requirements coverage rather than any  type of code coverage; code coverage of testing is considered part of PE assessment.
The simulation-based testing program performed was only a subset of that which would be required for a full assessment. The application to this pilot study demon- strates the feasibility of extending the scope to a full assessment using the application of similar testing processes.
VI.D.Device-Based Testing
We performed device-based testing using a custom- designed setup based on National Instruments CompactDAQ11 hardware and controlled via LabVIEW vir- tual instruments.12 Additional hardware, including a HART modem and digitally controlled relays, was also used. For the feasibility study, we restricted the input sensors to three-wire resistance temperature detectors (3W-RTD). A schematic of the apparatus is shown in Fig. 4.
The areas of focus for the device-based testing pro- gram are shown in Table IV.
VII.CONCLUSIONS
In order to demonstrate feasibility of the Hitachi approach to the justification of SC1 smart devices, we performed a pilot study where the approach was partially applied to the MII temperature transmitter STZ. MII provided access to all the required information  to  be  able to perform the assessment and supported any fol- low-up questions that were necessary to complete the assessment. Without cooperation from the supplier, this assessment would not have been impossible.
With regard to the assessment of PE, it is clear that the pilot study benefited from MII’s familiarity with the nuclear processes and MII’s rigorous approach to developing the products. During the development process MII had taken into account the consideration of compliance with the neces- sary standards. Therefore, it is likely that with some other suppliers the assessor will encounter more challenges from both a management and an assessment point of view.
Fig. 4. Schematic of the device-based testing apparatus.
TABLE IV
The Device-Based Testing Program
With regard to the ICBMs used to ensure the device functionality and absence of vulnerabilities, there were no technical showstoppers. Our experience with the pilot study suggested that any assessment program should have a pre- liminary assessment phase that reviews the software design and potential analysis issues before planning the resources, tools, and approaches needed to implement the assessment activities. This would need to consider the tools and tech- niques used by the manufacturer during development.
The use of CAE to support the assessment of gaps in PE and to design the ICBM program was useful in providing a principled justification of the activities per- formed. Based on the results obtained, we conclude that the Hitachi approach to the justification of SC1 smart devices is technically feasible.
Acknowledgments
We thank Horizon, Hitachi-GE, and MII for allowing us to share this study. Several of our colleagues, including Peter Bishop, Sam George, Catherine Menon, and Philippa Ryan, contributed to this work.
